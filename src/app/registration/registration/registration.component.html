<mat-card class="registration-card">
  <h1 class="title">You have to register to use this service</h1>

  <mat-card-content>
    <form [formGroup]="userData" (ngSubmit)="registerUser()">
      <div>
        <mat-form-field>
          <mat-label>Name</mat-label>
          <input matInput formControlName="name" type="text" />
        </mat-form-field>

        <ng-container
          *ngIf="
            userData.controls['name'].invalid &&
            (userData.controls['name'].dirty ||
              userData.controls['name'].touched)
          "
        >
          <span
            class="error field-error"
            *ngIf="userData.controls['name'].errors?.['required']"
          >
            A name must be provided
          </span>
        </ng-container>
      </div>

      <div>
        <mat-form-field>
          <mat-label>Email Address</mat-label>
          <input matInput formControlName="emailAddress" type="email" />
        </mat-form-field>

        <ng-container
          *ngIf="
            userData.controls['emailAddress'].invalid &&
            (userData.controls['emailAddress'].dirty ||
              userData.controls['emailAddress'].touched)
          "
        >
          <span
            class="error field-error"
            *ngIf="userData.controls['emailAddress'].errors?.['required']"
          >
            An e-mail address must be provided
          </span>
        </ng-container>
      </div>

      <div>
        <mat-form-field>
          <mat-label>Phone Number</mat-label>
          <input matInput formControlName="phoneNumber" type="tel" />
        </mat-form-field>

        <ng-container
          *ngIf="
            userData.controls['phoneNumber'].invalid &&
            (userData.controls['phoneNumber'].dirty ||
              userData.controls['phoneNumber'].touched)
          "
        >
          <span
            class="error field-error"
            *ngIf="userData.controls['phoneNumber'].errors?.['required']"
          >
            An e-mail address must be provided
          </span>
        </ng-container>
      </div>

      <div>
        <mat-checkbox formControlName="gdprConsent"
          >I consent to whatever you want to use with this data</mat-checkbox
        >

        <ng-container
          *ngIf="
            userData.controls['gdprConsent'].invalid &&
            (userData.controls['gdprConsent'].dirty ||
              userData.controls['gdprConsent'].touched)
          "
        >
          <span
            class="error field-error"
            *ngIf="userData.controls['gdprConsent'].value === false"
          >
            The GRPD consent must be accepted
          </span>
        </ng-container>
      </div>

      <div>
        <button
          type="submit"
          [disabled]="!userData.valid"
          mat-flat-button
          color="primary"
        >
          Submit
        </button>
      </div>
    </form>
  </mat-card-content>
</mat-card>
